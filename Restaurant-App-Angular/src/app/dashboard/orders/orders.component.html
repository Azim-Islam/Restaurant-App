<ng-template #indicatorTemplate>
  <div class="loading h-100 w-100 d-flex justify-content-center align-items-center" style="background: rgba(255, 255, 255, 0.6)">
    <div style="font-size:50px; color: darkseagreen" nz-icon nzType="loading" nzTheme="outline">
    </div>
  </div>
</ng-template>


<div class="main-wrapper pb-0">
  <div class="order-container overflow-auto h-100">
    <div class="container-fluid order-item-container p-4">
      <nz-spin class="position-absolute w-100" nzSimple="false" [nzSpinning]="backendService.isSendingRequest()" [nzIndicator]="indicatorTemplate" [class.d-none]="!backendService.isSendingRequest()">
      </nz-spin>

    <!--Main Content Start-->
      <div class="row g-5 gy-0">
        @for (orderData of backendService.listOfOrder(); track orderData.id) {
          <div class="col-12 col-md-6 col-xl-4">
            <div class="order-card bg-white shadow rounded-md">
              <div class="row order-card-header d-flex p-4 pb-2">
                <div class="col-8 p-0">
                  <div class="text-xl truncate">{{orderData.orderNumber}}</div>
                  <div class="text-lg text-gray-700 text-opacity-70">{{orderData.orderTime}}</div>
                </div>
                <div class="col-4 d-flex gap-2 justify-content-end">
                  <button class="edit-button drop-shadow-md">
                    <span nz-icon nzType="edit" nzTheme="outline"></span>
                  </button>
                  <button class="drop-down-button drop-shadow-md">
                    <span nz-icon nzType="delete" nzTheme="outline"></span>
                  </button>
                </div>
              </div>
              <hr class="h-[2px] bg-gray-400 border-0 dark:bg-gray-700">
              <div class="order-card-body overflow-auto p-4 pt-0">
                @for (foodItem of orderData.orderItems; track foodItem.id) {
                  <div class="d-flex gap-3 mt-4 w-100">
                    <div class="food-image-container">
                      <img nz-image nzDisablePreview class="food-image rounded-lg drop-shadow-lg" [nzSrc]="getFoodImage(foodItem.food.image)" alt="" [nzFallback]="fallbackImage">
                    </div>
                    <div class="d-flex flex-column w-100">
                      <div class="text-xl text-slate-800 text-opacity-90">{{foodItem.food.name}}</div>
                      <div class="d-flex justify-content-between w-100">
                        <div class="text-lg text-slate-800 text-opacity-70">{{foodItem.totalPrice}} ৳</div>
                        <div class="text-lg text-slate-800 text-opacity-70">QTY. {{foodItem.quantity}}</div>
                      </div>
                    </div>
                  </div>
                }
              </div>
              <div class="sticky-bottom d-flex justify-content-between p-2 ps-3 pe-3">
                <div class="d-flex flex-column">
                  <div class="text-lg text-slate-800 text-opacity-70">Total Quantity: <span class="font-bold text-lg">{{orderData.orderItems.length}}</span></div>
                  <div class="text-xl text-slate-800 text-opacity-70">Total Amount (৳): <span class="font-bold text-xl underline decoration-sky-500/30">{{orderData.amount}}৳</span></div>
                </div>
                <div class="text-2xl text-slate-800 text-opacity-70">{{orderData.table.tableNumber}}</div>
              </div>
            </div>
          </div>
        }
      </div>
    <!--Main Content End-->
    </div>
    <div class="sticky-bottom bg-white d-flex justify-content-end mt-2">
      <div class="p-3 pe-4">
        <nz-pagination [nzResponsive]="'true'" [nzPageIndex]="pageIndex" [nzTotal]="backendService.totalOrder()" [nzPageSize]="pageSize" [nzShowTotal]="rangeTemplate"></nz-pagination>
        <ng-template #rangeTemplate let-range="range" let-total>
          {{ range[0] }}-{{ range[1] }} of {{ total }} items
        </ng-template>
      </div>
    </div>
  </div>
</div>
